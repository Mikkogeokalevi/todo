<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geok√§tk√∂reissun Suunnittelija</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="sisalto-laatikko">
        <div id="speed-display">-- km/h</div>

        <div class="teksti-alue">
            <div class="logo-container">
                <img src="https://img.geocaching.com:443/84454fa6-e23a-4aad-a8a4-612b77f23abe.png" alt="Oma logo" class="logo" />
                <div>
                    <h1 class="paaotsikko">‚Äî MK Reissuapuri ‚Äî</h1>
                    <h2 id="listNameDisplay" class="list-name-display"></h2>
                </div>
            </div>

            <div class="container">
                <div class="profile-controls">
                    <button id="toggleTrackingBtn">üõ∞Ô∏è Aloita seuranta</button>
                </div>

                <div id="location-status-display">
                    <p>Aloita seuranta n√§hd√§ksesi sijaintisi...</p>
                </div>

                <div id="map"></div>
                
                <div class="pgc-settings-container">
                    <details>
                        <summary>Asetukset</summary>
                        <div class="pgc-input-wrapper">
                            <label for="pgcProfileName">Project-GC nimi:</label>
                            <input type="text" id="pgcProfileName" placeholder="Oma k√§tk√∂ilynimesi...">
                            <hr class="custom-hr" style="margin: 10px 0;">
                            <label>Lokittajat:</label>
                            <ul id="loggerList"></ul>
                            <div class="add-logger-controls">
                                <input type="text" id="newLoggerInput" placeholder="Uuden lokittajan nimi...">
                                <button id="addLoggerBtn">+</button>
                            </div>
                        </div>
                    </details>
                </div>
                
                <hr class="custom-hr">

                <div class="view-toggles">
                    <button id="showTripListBtn" class="view-toggle-btn active">Reissulista</button>
                    <button id="showFoundLogBtn" class="view-toggle-btn">Loki</button>
                </div>

                <div id="tripListView">
                    <h2 class="alaotsikko">L√∂ydett√§v√§t kunnat ja k√§tk√∂t</h2>
                    <button id="toggleBulkAddBtn" class="toggle-button">Lis√§√§ kunnat listana</button>
                    <div id="bulkAddContainer" class="bulk-add hidden">
                        <h3>Lis√§√§ kunnat listana</h3>
                        <textarea id="bulkAddMunicipalities" rows="4" placeholder="Liit√§ t√§h√§n kunnat pilkulla tai rivinvaihdolla eroteltuna..."></textarea>
                        <button id="bulkAddBtn">Lis√§√§ listasta</button>
                    </div>
                    
                    <button id="togglePgcAddBtn" class="toggle-button">Lis√§√§ PGC-datalla</button>
                    <div id="globalPgcAddContainer" class="bulk-add hidden">
                        <h3>Lis√§√§ k√§tk√∂ PGC-datalla (automaattinen kunnan haku)</h3>
                        <textarea id="globalPgcPasteArea" rows="4" placeholder="Liit√§ PGC:n k√§tk√∂tiedot t√§h√§n..."></textarea>
                        <button id="globalAddFromPgcBtn">Lis√§√§ ja paikanna</button>
                    </div>

                    <ul id="municipalityList"></ul>
                </div>

                <div id="foundLogView" class="hidden">
                    <h2 class="alaotsikko">L√∂ydetyt k√§tk√∂t</h2>
                    
                    <div id="logPgcAddContainer" class="bulk-add">
                        <h3>Lis√§√§ l√∂ydetyt PGC-datalla</h3>
                        <textarea id="logPgcPasteArea" rows="4" placeholder="Liit√§ l√∂ydettyjen k√§tk√∂jen PGC-tiedot t√§h√§n..."></textarea>
                        <button id="logAddFromPgcBtn">Lis√§√§ l√∂ydetyt lokiin</button>
                    </div>

                    <div class="direct-add-cache">
                        <input type="text" id="directAddInput" placeholder="Yksitt√§inen lis√§ys: liit√§ k√§tk√∂n URL (coord.info/GC...)">
                        <button id="directAddBtn">Lis√§√§ lokiin</button>
                    </div>
                    <ul id="foundCachesList"></ul>
                </div>
            </div>
        </div>
    </div>
    
    <template id="cacheTypeSelector">
        <select class="cache-type-selector">
            <option value="Tradi">Tradi</option>
            <option value="Multi">Multi</option>
            <option value="Mysti">Mysti</option>
            <option value="Letter">Letter</option>
            <option value="Wherigo">Wherigo</option>
            <option value="Event">Event</option>
            <option value="Muu">Muu</option>
        </select>
    </template>
    
    <div id="editCacheModal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Muokkaa k√§tk√∂n tietoja</h2>
            <form id="editCacheForm">
                <input type="hidden" id="editMunIndex">
                <input type="hidden" id="editCacheIndex">

                <div class="form-row">
                    <div class="form-group">
                        <label for="editGcCode">GC-koodi:</label>
                        <input type="text" id="editGcCode" placeholder="GCXXXXX">
                    </div>
                    <div class="form-group">
                        <label for="editFp">FP-tiedot:</label>
                        <input type="text" id="editFp" placeholder="esim. 15 FP (7%)">
                    </div>
                </div>

                <div class="form-group">
                    <label for="editName">Nimi:</label>
                    <input type="text" id="editName" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="editType">Tyyppi:</label>
                        <input type="text" id="editType">
                    </div>
                    <div class="form-group">
                        <label for="editSize">Koko:</label>
                        <input type="text" id="editSize">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="editDifficulty">Vaikeus (D):</label>
                        <input type="text" id="editDifficulty" placeholder="1.0 - 5.0">
                    </div>
                    <div class="form-group">
                        <label for="editTerrain">Maasto (T):</label>
                        <input type="text" id="editTerrain" placeholder="1.0 - 5.0">
                    </div>
                </div>

                <div class="form-group">
                    <label for="editCoords">Koordinaatit:</label>
                    <input type="text" id="editCoords" placeholder="N 62¬∞ 16.006 E 021¬∞ 25.444">
                </div>

                <div class="modal-actions">
                    <button type="submit" class="modal-save-btn">Tallenna</button>
                    <button type="button" class="modal-cancel-btn">Peruuta</button>
                </div>
            </form>
        </div>
    </div>
    
    <script type="module" src="script.js"></script>
</body>
</html>
